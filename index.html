<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Purple Galaxy CodeMirror 6 Editor</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(to bottom, #0a0015, #1a0033);
      font-family: Arial, sans-serif;
    }
    .cm-editor {
      width: 80%;
      max-width: 800px;
      height: 500px;
      border: 2px solid #6a0dad;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(106, 13, 173, 0.5);
      background: #120024;
    }
    /* Custom Purple Galaxy Theme */
    .cm-theme-purple-galaxy {
      --bg-color: #120024;
      --text-color: #e6e6fa;
      --cursor-color: #ff00ff;
      --selection-bg: rgba(106, 13, 173, 0.3);
      --keyword-color: #ff00ff;
      --string-color: #dda0dd;
      --number-color: #00b7eb;
      --comment-color: #8a2be2;
      --function-color: #ff69b4;
      --variable-color: #e6e6fa;
      --bracket-color: #d8bfd8;
    }
    .cm-theme-purple-galaxy .cm-scroller {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'Courier New', monospace;
    }
    .cm-theme-purple-galaxy .cm-content {
      caret-color: var(--cursor-color);
    }
    .cm-theme-purple-galaxy .cm-selectionBackground {
      background: var(--selection-bg);
    }
    .cm-theme-purple-galaxy .tok-keyword {
      color: var(--keyword-color);
    }
    .cm-theme-purple-galaxy .tok-string {
      color: var(--string-color);
    }
    .cm-theme-purple-galaxy .tok-number {
      color: var(--number-color);
    }
    .cm-theme-purple-galaxy .tok-comment {
      color: var(--comment-color);
    }
    .cm-theme-purple-galaxy .tok-function {
      color: var(--function-color);
    }
    .cm-theme-purple-galaxy .tok-variable {
      color: var(--variable-color);
    }
    .cm-theme-purple-galaxy .tok-bracket {
      color: var(--bracket-color);
    }
    .cm-theme-purple-galaxy .cm-gutters {
      background: #1a0033;
      color: #e6e6fa;
      border-right: 1px solid #6a0dad;
    }
    .cm-theme-purple-galaxy .cm-lineNumbers .cm-gutterElement {
      color: #e6e6fa;
    }
    .cm-theme-purple-galaxy .cm-activeLine {
      background: rgba(106, 13, 173, 0.2);
    }
    .cm-theme-purple-galaxy .cm-cursor {
      border-left: 2px solid var(--cursor-color);
    }
  </style>
</head>
<body>
  <div id="editor"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/javascript/javascript.min.js"></script>
  <script>
    import { EditorView, basicSetup } from "https://esm.sh/@codemirror/basic-setup";
    import { javascript } from "https://esm.sh/@codemirror/lang-javascript";

    // Create the purple galaxy theme
    const purpleGalaxyTheme = EditorView.theme({
      "&": {
        backgroundColor: "var(--bg-color)",
        color: "var(--text-color)",
        height: "100%"
      },
      ".cm-content": {
        caretColor: "var(--cursor-color)"
      },
      ".cm-selectionBackground": {
        background: "var(--selection-bg)"
      },
      ".tok-keyword": { color: "var(--keyword-color)" },
      ".tok-string": { color: "var(--string-color)" },
      ".tok-number": { color: "var(--number-color)" },
      ".tok-comment": { color: "var(--comment-color)" },
      ".tok-function": { color: "var(--function-color)" },
      ".tok-variable": { color: "var(--variable-color)" },
      ".tok-bracket": { color: "var(--bracket-color)" },
      ".cm-gutters": {
        background: "#1a0033",
        color: "#e6e6fa",
        borderRight: "1px solid #6a0dad"
      },
      ".cm-lineNumbers .cm-gutterElement": {
        color: "#e6e6fa"
      },
      ".cm-activeLine": {
        background: "rgba(106, 13, 173, 0.2)"
      },
      ".cm-cursor": {
        borderLeft: "2px solid var(--cursor-color)"
      }
    }, { dark: true });

    // Sample JavaScript code
    const initialCode = `// Welcome to the Purple Galaxy Editor!
function exploreGalaxy() {
  const stars = 1000000;
  let message = "Exploring the cosmos...";
  console.log(message);
  for (let i = 0; i < stars; i++) {
    shineStar(i);
  }
}

function shineStar(starId) {
  return \`Star \${starId} is shining!\`;
}`;

    // Initialize CodeMirror editor
    const editor = new EditorView({
      state: EditorState.create({
        doc: initialCode,
        extensions: [
          basicSetup,
          javascript(),
          purpleGalaxyTheme
        ]
      }),
      parent: document.getElementById("editor")
    });
  </script>
</body>
</html>
